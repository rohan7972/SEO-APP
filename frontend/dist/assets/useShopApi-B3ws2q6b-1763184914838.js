import{c as y,r as $e}from"./react-vendor-tAaa2TlE-1763184914838.js";var Pe={},Oe={},k={},Ae={},ie={},x={},ce={},j={},se={};Object.defineProperty(se,"__esModule",{value:!0});function me(e,r){if(r==null||typeof e>"u"||!Object.prototype.isPrototypeOf.call(Object.getPrototypeOf(e),r)||r.constructor.name!=="Object"&&r.constructor.name!=="Array")return r;var t={};return Object.keys(r).forEach(function(o){var i=Object.prototype.hasOwnProperty.call(e,o);i&&typeof e[o]=="object"&&!Array.isArray(e[o])?t[o]=me(e[o],r[o]):t[o]=r[o]}),Object.keys(e).forEach(function(o){var i=Object.prototype.hasOwnProperty.call(r,o);i||(t[o]=e[o])}),Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}se.default=me;var U={};Object.defineProperty(U,"__esModule",{value:!0});U.SEPARATOR=U.PREFIX=void 0;U.PREFIX="APP";U.SEPARATOR="::";var D={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ComponentType=e.Group=void 0,function(r){r.AuthCode="AuthCode",r.Button="Button",r.ButtonGroup="ButtonGroup",r.Cart="Cart",r.Client="Client",r.ContextualSaveBar="ContextualSaveBar",r.Error="Error",r.Features="Features",r.FeedbackModal="FeedbackModal",r.Fullscreen="Fullscreen",r.LeaveConfirmation="LeaveConfirmation",r.Link="Link",r.Loading="Loading",r.Menu="Menu",r.Modal="Modal",r.Navigation="Navigation",r.Performance="Performance",r.Pos="Pos",r.Print="Print",r.ResourcePicker="Resource_Picker",r.unstable_Picker="unstable_Picker",r.Scanner="Scanner",r.SessionToken="SessionToken",r.Share="Share",r.TitleBar="TitleBar",r.Toast="Toast",r.MarketingExternalActivityTopBar="MarketingExternalActivityTopBar",r.WebVitals="WebVitals"}(e.Group||(e.Group={})),function(r){r.Button="Button",r.ButtonGroup="ButtonGroup"}(e.ComponentType||(e.ComponentType={}))})(D);(function(e){var r=y&&y.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0}),e.updateActionFromPayload=e.isValidOptionalString=e.isValidOptionalNumber=e.forEachInEnum=e.getMergedProps=e.findMatchInEnum=e.getEventNameSpace=e.NonSnakeCaseGroup=e.actionWrapper=void 0;var t=r(se),o=U,i=D;function n(l){return l}e.actionWrapper=n,e.NonSnakeCaseGroup=[i.Group.AuthCode,i.Group.Button,i.Group.ButtonGroup,i.Group.Cart,i.Group.Error,i.Group.Features,i.Group.Fullscreen,i.Group.Link,i.Group.Loading,i.Group.Menu,i.Group.Modal,i.Group.Navigation,i.Group.Pos,i.Group.Print,i.Group.ResourcePicker,i.Group.Scanner,i.Group.SessionToken,i.Group.Share,i.Group.TitleBar,i.Group.Toast,i.Group.unstable_Picker];function u(l){return l.replace(/([A-Z])/g,function(v,A,P){return(P===0?"":"_")+v[0].toLowerCase()})}function h(l){return e.NonSnakeCaseGroup.includes(l)?l.toUpperCase():u(l).toUpperCase()}function p(l,v,A){if(v.startsWith(""+o.PREFIX+o.SEPARATOR))return v;var P=h(l);if(A){var M=A.subgroups,T=A.type;M&&M.length>0&&(P+=P.length>0?o.SEPARATOR:"",M.forEach(function(B,g){P+=""+B.toUpperCase()+(g<M.length-1?o.SEPARATOR:"")})),T!==l&&T&&(P+=""+(P.length>0?o.SEPARATOR:"")+T.toUpperCase())}return P&&(P+=""+(P.length>0?o.SEPARATOR:"")+v.toUpperCase()),""+o.PREFIX+o.SEPARATOR+P}e.getEventNameSpace=p;function a(l,v){var A=Object.keys(l).find(function(P){return v===l[P]});return A?l[A]:void 0}e.findMatchInEnum=a;function c(l,v){var A=t.default(l,v);if(!A){var P=Object.assign(l,v);return P}return A}e.getMergedProps=c;function s(l,v){Object.keys(l).forEach(function(A){v(l[A])})}e.forEachInEnum=s;function b(l){return l==null||typeof l=="number"}e.isValidOptionalNumber=b;function d(l){return l==null||typeof l=="string"}e.isValidOptionalString=d;function f(l,v){var A=l.id;return A===v.id?(Object.assign(l,c(l,v)),!0):!1}e.updateActionFromPayload=f})(j);var N={},ee={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LifecycleHook=e.PermissionType=e.MessageType=void 0,function(r){r.GetState="getState",r.Dispatch="dispatch",r.Subscribe="subscribe",r.Unsubscribe="unsubscribe"}(e.MessageType||(e.MessageType={})),function(r){r.Dispatch="Dispatch",r.Subscribe="Subscribe"}(e.PermissionType||(e.PermissionType={})),function(r){r.UpdateAction="UpdateAction",r.DispatchAction="DispatchAction"}(e.LifecycleHook||(e.LifecycleHook={}))})(ee);var L={};Object.defineProperty(L,"__esModule",{value:!0});L.removeFromCollection=L.addAndRemoveFromCollection=void 0;function He(e,r,t){return e.push(r),function(){return Ee(e,r,t)}}L.addAndRemoveFromCollection=He;function Ee(e,r,t){var o=e.findIndex(function(i){return i===r});return o>=0?(e.splice(o,1),t&&t(r),!0):!1}L.removeFromCollection=Ee;var $={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.permissionAction=e.isErrorEventName=e.throwError=e.invalidOriginAction=e.fromAction=e.AppBridgeError=e.AppActionType=e.Action=void 0;var r=D,t=j,o;(function(s){s.INVALID_ACTION="APP::ERROR::INVALID_ACTION",s.INVALID_ACTION_TYPE="APP::ERROR::INVALID_ACTION_TYPE",s.INVALID_PAYLOAD="APP::ERROR::INVALID_PAYLOAD",s.INVALID_OPTIONS="APP::ERROR::INVALID_OPTIONS",s.UNEXPECTED_ACTION="APP::ERROR::UNEXPECTED_ACTION",s.PERSISTENCE="APP::ERROR::PERSISTENCE",s.UNSUPPORTED_OPERATION="APP::ERROR::UNSUPPORTED_OPERATION",s.NETWORK="APP::ERROR::NETWORK",s.PERMISSION="APP::ERROR::PERMISSION",s.FAILED_AUTHENTICATION="APP::ERROR::FAILED_AUTHENTICATION",s.INVALID_ORIGIN="APP::ERROR::INVALID_ORIGIN"})(o=e.Action||(e.Action={})),function(s){s.INVALID_CONFIG="APP::ERROR::INVALID_CONFIG",s.MISSING_CONFIG="APP::APP_ERROR::MISSING_CONFIG",s.MISSING_APP_BRIDGE_MIDDLEWARE="APP::APP_ERROR::MISSING_APP_BRIDGE_MIDDLEWARE",s.WINDOW_UNDEFINED="APP::APP_ERROR::WINDOW_UNDEFINED",s.REDUX_REINSTANTIATED="APP::APP_ERROR::REDUX_REINSTANTIATED",s.MISSING_LOCAL_ORIGIN="APP::APP_ERROR::MISSING_LOCAL_ORIGIN",s.MISSING_HOST_PROVIDER="APP::APP_ERROR::MISSING_HOST_PROVIDER",s.MISSING_ROUTER_CONTEXT="APP::APP_ERROR::MISSING_ROUTER_CONTEXT",s.MISSING_HISTORY_BLOCK="APP::APP_ERROR::MISSING_HISTORY_BLOCK"}(e.AppActionType||(e.AppActionType={}));var i=function(){function s(b){this.name="AppBridgeError",this.message=b,typeof Error.captureStackTrace=="function"?Error.captureStackTrace(this,this.constructor):this.stack=new Error(this.message).stack}return s}();e.AppBridgeError=i,i.prototype=Object.create(Error.prototype);function n(s,b,d){var f=s?b+": "+s:b,l=new i(f);return l.action=d,l.type=b,l}e.fromAction=n;function u(s){return t.actionWrapper({group:r.Group.Error,payload:{message:s,type:o.INVALID_ORIGIN},type:o.INVALID_ORIGIN})}e.invalidOriginAction=u;function h(){for(var s=[],b=0;b<arguments.length;b++)s[b]=arguments[b];var d=s[0],f,l;throw typeof s[1]=="string"?f=s[1]:(l=s[1],f=s[2]||""),n(f,d,l)}e.throwError=h;function p(s){var b=t.findMatchInEnum(o,s);return typeof b=="string"}e.isErrorEventName=p;function a(s,b,d){var f=b.payload;return t.actionWrapper({type:s,group:r.Group.Error,payload:{action:b,message:d,type:s,id:f&&f.id?f.id:void 0}})}function c(s,b){return a(o.PERMISSION,s,b||"Action is not permitted")}e.permissionAction=c})($);var W={};Object.defineProperty(W,"__esModule",{value:!0});W.generateUuid=void 0;function F(e){return Array.from(e).map(function(r){return("00"+r.toString(16)).slice(-2)}).join("")}function G(e){if(typeof Uint8Array=="function"&&typeof window=="object"&&window.crypto){var r=new Uint8Array(e),t=window.crypto.getRandomValues(r);if(t)return t}return Array.from(new Array(e),function(){return Math.random()*255|0})}function Se(){var e=64,r=G(1),t=G(2);return r[0]&=191,t[0]&=15|e,[F(G(4)),"-",F(G(2)),"-",F(t),"-",F(r),F(G(1)),"-",F(G(6))].join("")}W.generateUuid=Se;W.default=Se;var qe=y&&y.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,i){o.__proto__=i}||function(o,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(o[n]=i[n])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function o(){this.constructor=r}r.prototype=t===null?Object.create(t):(o.prototype=t.prototype,new o)}}(),J=y&&y.__assign||function(){return J=Object.assign||function(e){for(var r,t=1,o=arguments.length;t<o;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},J.apply(this,arguments)},Ke=y&&y.__spreadArray||function(e,r){for(var t=0,o=r.length,i=e.length;t<o;t++,i++)e[i]=r[t];return e},Xe=y&&y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(N,"__esModule",{value:!0});N.unsubscribeActions=N.ActionSetWithChildren=N.ActionSet=void 0;var Ye=ee,oe=L,K=$,Je=D,Qe=Xe(W),re=j,Me=function(){function e(r,t,o,i){var n=this;this.app=r,this.type=t,this.group=o,this.subgroups=[],this.subscriptions=[],r||K.throwError(K.Action.INVALID_ACTION,"Missing required `app`"),this.id=i||Qe.default(),this.defaultGroup=o;var u=this.set;this.set=function(){for(var h,p=[],a=0;a<arguments.length;a++)p[a]=arguments[a];return n.app.hooks?(h=n.app.hooks).run.apply(h,Ke([Ye.LifecycleHook.UpdateAction,u,n],p)):u.apply(n,p)}}return e.prototype.set=function(){},Object.defineProperty(e.prototype,"component",{get:function(){return{id:this.id,subgroups:this.subgroups,type:this.type}},enumerable:!1,configurable:!0}),e.prototype.updateSubscription=function(r,t,o){var i=r.eventType,n=r.callback,u=r.component,h;return h=this.subscriptions.findIndex(function(p){return p===r}),h>=0?this.subscriptions[h].unsubscribe():h=void 0,this.group=t,this.subgroups=o,Object.assign(u,{subgroups:this.subgroups}),this.subscribe(i,n,u,h)},e.prototype.error=function(r){var t=this,o=[];return re.forEachInEnum(K.Action,function(i){o.push(t.subscriptions.length),t.subscribe(i,r)}),function(){var i=o.map(function(n){return t.subscriptions[n]});i.forEach(function(n){oe.removeFromCollection(t.subscriptions,n,function(u){u.unsubscribe()})})}},e.prototype.subscribe=function(r,t,o,i){var n=this,u=o||this.component,h=r.toUpperCase(),p=typeof i=="number"?t:t.bind(this),a;K.isErrorEventName(r)?a=re.getEventNameSpace(Je.Group.Error,r,J(J({},u),{type:""})):a=re.getEventNameSpace(this.group,r,u);var c=this.app.subscribe(a,p,o?o.id:this.id),s={eventType:h,unsubscribe:c,callback:p,component:u,updateSubscribe:function(b,d){return n.updateSubscription(s,b,d)}};return typeof i=="number"&&i>=0&&i<this.subscriptions.length?this.subscriptions[i]=s:this.subscriptions.push(s),c},e.prototype.unsubscribe=function(r){return r===void 0&&(r=!1),fe(this.subscriptions,this.defaultGroup,r),this},e}();N.ActionSet=Me;var Ze=function(e){qe(r,e);function r(){var t=e!==null&&e.apply(this,arguments)||this;return t.children=[],t}return r.prototype.unsubscribe=function(t,o){return t===void 0&&(t=!0),o===void 0&&(o=!1),fe(this.subscriptions,this.defaultGroup,o),this.children.forEach(function(i){i instanceof r?i.unsubscribe(t,!t):i.unsubscribe(!t)}),this},r.prototype.getChild=function(t){var o=this.children.findIndex(function(i){return i.id===t});return o>=0?this.children[o]:void 0},r.prototype.getChildIndex=function(t){return this.children.findIndex(function(o){return o.id===t})},r.prototype.getChildSubscriptions=function(t,o){return this.subscriptions.filter(function(i){return i.component.id===t&&(!o||o===i.eventType)})},r.prototype.addChild=function(t,o,i){var n=this,u=t.subscriptions,h=this.getChild(t.id);return h||this.children.push(t),!u||o===t.group&&i===t.subgroups?this:(u.forEach(function(p){var a=p.updateSubscribe;a(o,i)}),Object.assign(t,{group:o,subgroups:i}),t instanceof r&&t.children.forEach(function(p){return n.addChild(p,o,i)}),this)},r.prototype.removeChild=function(t){var o=this;return oe.removeFromCollection(this.children,this.getChild(t),function(){var i=o.subscriptions.filter(function(n){return n.component.id===t});i.forEach(function(n){oe.removeFromCollection(o.subscriptions,n,function(u){u.unsubscribe()})})}),this},r.prototype.subscribeToChild=function(t,o,i){var n=this,u=i.bind(this);if(o instanceof Array)return o.forEach(function(c){return n.subscribeToChild(t,c,i)}),this;if(typeof o!="string")return this;var h=o.toUpperCase(),p=this.getChildSubscriptions(t.id,h);if(p.length>0)p.forEach(function(c){return c.updateSubscribe(n.group,t.subgroups)});else{var a={id:t.id,subgroups:t.subgroups,type:t.type};this.subscribe(h,u,a)}return this},r.prototype.getUpdatedChildActions=function(t,o){if(t.length===0){for(;o.length>0;){var i=o.pop();if(!i)break;this.removeChild(i.id)}return}for(var n=t.filter(function(p,a,c){return a===c.indexOf(p)}),u=n.map(function(p){return p.id}),h=o.filter(function(p){return u.indexOf(p.id)<0});h.length>0;){var i=h.pop();if(!i)break;this.removeChild(i.id)}return n},r}(Me);N.ActionSetWithChildren=Ze;function fe(e,r,t){t===void 0&&(t=!1),e.forEach(function(o){if(t){var i=o.updateSubscribe;i(r,[])}else{var n=o.unsubscribe;n()}}),t||(e.length=0)}N.unsubscribeActions=fe;(function(e){var r=y&&y.__extends||function(){var c=function(s,b){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,f){d.__proto__=f}||function(d,f){for(var l in f)Object.prototype.hasOwnProperty.call(f,l)&&(d[l]=f[l])},c(s,b)};return function(s,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");c(s,b);function d(){this.constructor=s}s.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d)}}(),t=y&&y.__assign||function(){return t=Object.assign||function(c){for(var s,b=1,d=arguments.length;b<d;b++){s=arguments[b];for(var f in s)Object.prototype.hasOwnProperty.call(s,f)&&(c[f]=s[f])}return c},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Button=e.update=e.clickButton=e.Style=e.Icon=e.Action=void 0;var o=j,i=N,n=D,u;(function(c){c.CLICK="CLICK",c.UPDATE="UPDATE"})(u=e.Action||(e.Action={})),function(c){c.Print="print"}(e.Icon||(e.Icon={})),function(c){c.Danger="danger"}(e.Style||(e.Style={}));function h(c,s,b){var d=s.id,f=o.getEventNameSpace(c,u.CLICK,s),l={id:d,payload:b};return o.actionWrapper({type:f,group:c,payload:l})}e.clickButton=h;function p(c,s,b){var d=s.id,f=b.label,l=o.getEventNameSpace(c,u.UPDATE,s),v=t(t({},b),{id:d,label:f});return o.actionWrapper({type:l,group:c,payload:v})}e.update=p;var a=function(c){r(s,c);function s(b,d){var f=c.call(this,b,n.ComponentType.Button,n.Group.Button)||this;return f.disabled=!1,f.loading=!1,f.plain=!1,f.set(d,!1),f}return Object.defineProperty(s.prototype,"options",{get:function(){return{disabled:this.disabled,icon:this.icon,label:this.label,style:this.style,loading:this.loading,plain:this.plain}},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"payload",{get:function(){return t(t({},this.options),{id:this.id})},enumerable:!1,configurable:!0}),s.prototype.set=function(b,d){d===void 0&&(d=!0);var f=o.getMergedProps(this.options,b),l=f.label,v=f.disabled,A=f.icon,P=f.style,M=f.loading,T=f.plain;return this.label=l,this.disabled=!!v,this.icon=A,this.style=P,this.loading=!!M,this.plain=!!T,d&&this.dispatch(u.UPDATE),this},s.prototype.dispatch=function(b,d){switch(b){case u.CLICK:this.app.dispatch(h(this.group,this.component,d));break;case u.UPDATE:{var f=p(this.group,this.component,this.payload);this.app.dispatch(f);break}}return this},s}(i.ActionSet);e.Button=a})(ce);Object.defineProperty(x,"__esModule",{value:!0});x.getSingleButton=void 0;var xe=ce;function et(e,r,t,o){return e.addChild(r,e.group,t),e.subscribeToChild(r,xe.Action.UPDATE,o),r.payload}x.getSingleButton=et;(function(e){var r=y&&y.__extends||function(){var g=function(O,_){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,E){m.__proto__=E}||function(m,E){for(var S in E)Object.prototype.hasOwnProperty.call(E,S)&&(m[S]=E[S])},g(O,_)};return function(O,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");g(O,_);function m(){this.constructor=O}O.prototype=_===null?Object.create(_):(m.prototype=_.prototype,new m)}}(),t=y&&y.__assign||function(){return t=Object.assign||function(g){for(var O,_=1,m=arguments.length;_<m;_++){O=arguments[_];for(var E in O)Object.prototype.hasOwnProperty.call(O,E)&&(g[E]=O[E])}return g},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.ModalIframe=e.ModalMessage=e.Modal=e.isMessageModal=e.isIframeModal=e.data=e.update=e.clickFooterButton=e.updateModalSize=e.closeModal=e.openModal=e.Size=e.Action=void 0;var o=x,i=j,n=N,u=D,h=ce,p;(function(g){g.OPEN="APP::MODAL::OPEN",g.CLOSE="APP::MODAL::CLOSE",g.UPDATE="APP::MODAL::UPDATE",g.UPDATE_CONTENT="APP::MODAL::CONTENT::UPDATE",g.FOOTER_BUTTON_CLICK="APP::MODAL::FOOTER::BUTTON::CLICK",g.FOOTER_BUTTON_UPDATE="APP::MODAL::FOOTER::BUTTON::UPDATE",g.UPDATE_SIZE="APP::MODAL::UPDATE_SIZE",g.DATA="APP::MODAL::DATA"})(p=e.Action||(e.Action={}));var a;(function(g){g.Small="small",g.Medium="medium",g.Large="large",g.Full="full",g.Auto="auto"})(a=e.Size||(e.Size={}));var c={group:u.Group.Modal,subgroups:["Footer"],type:u.ComponentType.Button};function s(g){return i.actionWrapper({group:u.Group.Modal,payload:g,type:p.OPEN})}e.openModal=s;function b(g){return i.actionWrapper({group:u.Group.Modal,payload:g,type:p.CLOSE})}e.closeModal=b;function d(g){return i.actionWrapper({group:u.Group.Modal,payload:g,type:p.UPDATE_SIZE})}e.updateModalSize=d;function f(g,O){var _=t({id:g},c);return h.clickButton(u.Group.Modal,_,O)}e.clickFooterButton=f;function l(g){return i.actionWrapper({payload:g,group:u.Group.Modal,type:p.UPDATE})}e.update=l;function v(g){return i.actionWrapper({payload:g,group:u.Group.Modal,type:p.DATA})}e.data=v;function A(g){return typeof g.url=="string"||typeof g.path=="string"}e.isIframeModal=A;function P(g){return typeof g.message=="string"}e.isMessageModal=P;var M=function(g){r(O,g);function O(){var _=g!==null&&g.apply(this,arguments)||this;return _.size=a.Small,_}return Object.defineProperty(O.prototype,"footer",{get:function(){if(!(!this.footerPrimary&&!this.footerSecondary))return{buttons:{primary:this.footerPrimary,secondary:this.footerSecondary}}},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"footerOptions",{get:function(){if(!(!this.footerPrimaryOptions&&!this.footerSecondaryOptions))return{buttons:{primary:this.footerPrimaryOptions,secondary:this.footerSecondaryOptions}}},enumerable:!1,configurable:!0}),O.prototype.close=function(){this.app.dispatch(b({id:this.id}))},O.prototype.setFooterPrimaryButton=function(_,m){var E=this,S=c.subgroups;this.footerPrimaryOptions=this.getChildButton(_,this.footerPrimaryOptions),this.footerPrimary=this.footerPrimaryOptions?o.getSingleButton(this,this.footerPrimaryOptions,S,function(I){E.updatePrimaryFooterButton(I,m)}):void 0},O.prototype.setFooterSecondaryButtons=function(_,m){var E=this,S=c.subgroups,I=_||[],w=this.footerOptions&&this.footerOptions.buttons.secondary||[];this.footerSecondaryOptions=this.getUpdatedChildActions(I,w),this.footerSecondary=this.footerSecondaryOptions?this.footerSecondaryOptions.map(function(V){return o.getSingleButton(E,V,S,function(z){E.updateSecondaryFooterButton(z,m)})}):void 0},O.prototype.getChildButton=function(_,m){var E=_?[_]:[],S=m?[m]:[],I=this.getUpdatedChildActions(E,S);return I?I[0]:void 0},O.prototype.updatePrimaryFooterButton=function(_,m){!this.footer||!this.footer.buttons.primary||i.updateActionFromPayload(this.footer.buttons.primary,_)&&m()},O.prototype.updateSecondaryFooterButton=function(_,m){if(!(!this.footer||!this.footer.buttons||!this.footer.buttons.secondary)){for(var E,S=0,I=this.footer.buttons.secondary;S<I.length;S++){var w=I[S];if(E=i.updateActionFromPayload(w,_),E)break}E&&m()}},O}(n.ActionSetWithChildren);e.Modal=M;var T=function(g){r(O,g);function O(_,m){var E=g.call(this,_,u.Group.Modal,u.Group.Modal)||this;return E.set(m,!1),E}return Object.defineProperty(O.prototype,"payload",{get:function(){return t(t({},this.options),{footer:this.footer,id:this.id})},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"options",{get:function(){return{footer:this.footerOptions,message:this.message,size:this.size,title:this.title}},enumerable:!1,configurable:!0}),O.prototype.set=function(_,m){var E=this;m===void 0&&(m=!0);var S=i.getMergedProps(this.options,_),I=S.title,w=S.footer,V=S.message,z=S.size;return this.title=I,this.message=V,this.size=z,this.setFooterPrimaryButton(w?w.buttons.primary:void 0,function(){E.dispatch(p.UPDATE)}),this.setFooterSecondaryButtons(w?w.buttons.secondary:void 0,function(){E.dispatch(p.UPDATE)}),m&&this.dispatch(p.UPDATE),this},O.prototype.dispatch=function(_){switch(_){case p.OPEN:this.app.dispatch(s(this.payload));break;case p.CLOSE:this.close();break;case p.UPDATE:this.app.dispatch(l(this.payload));break}return this},O}(M);e.ModalMessage=T;var B=function(g){r(O,g);function O(_,m){var E=g.call(this,_,u.Group.Modal,u.Group.Modal)||this;return E.set(m,!1),E}return Object.defineProperty(O.prototype,"payload",{get:function(){return t(t({},this.options),{footer:this.footer,id:this.id})},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"options",{get:function(){return{footer:this.footerOptions,path:this.path,size:this.size,title:this.title,url:this.url,loading:this.loading}},enumerable:!1,configurable:!0}),O.prototype.set=function(_,m){var E=this;m===void 0&&(m=!0);var S=i.getMergedProps(this.options,_),I=S.title,w=S.footer,V=S.path,z=S.url,Ve=S.size,ze=S.loading;return this.title=I,this.url=z,this.path=V,this.size=Ve,this.loading=ze,this.setFooterPrimaryButton(w?w.buttons.primary:void 0,function(){E.dispatch(p.UPDATE)}),this.setFooterSecondaryButtons(w?w.buttons.secondary:void 0,function(){E.dispatch(p.UPDATE)}),m&&this.dispatch(p.UPDATE),this},O.prototype.dispatch=function(_,m){switch(_){case p.OPEN:this.app.dispatch(s(this.payload));break;case p.CLOSE:this.close();break;case p.UPDATE:this.app.dispatch(l(this.payload));break;case p.DATA:this.app.dispatch(v(m||{}));break}return this},O}(M);e.ModalIframe=B})(ie);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.create=e.Modal=e.isMessageModal=e.data=e.update=e.clickFooterButton=e.updateModalSize=e.closeModal=e.openModal=e.Size=e.Action=e.isIframeModal=e.ModalMessage=e.ModalIframe=void 0;var r=ie;Object.defineProperty(e,"ModalIframe",{enumerable:!0,get:function(){return r.ModalIframe}}),Object.defineProperty(e,"ModalMessage",{enumerable:!0,get:function(){return r.ModalMessage}}),Object.defineProperty(e,"isIframeModal",{enumerable:!0,get:function(){return r.isIframeModal}});var t=ie;Object.defineProperty(e,"Action",{enumerable:!0,get:function(){return t.Action}}),Object.defineProperty(e,"Size",{enumerable:!0,get:function(){return t.Size}}),Object.defineProperty(e,"openModal",{enumerable:!0,get:function(){return t.openModal}}),Object.defineProperty(e,"closeModal",{enumerable:!0,get:function(){return t.closeModal}}),Object.defineProperty(e,"updateModalSize",{enumerable:!0,get:function(){return t.updateModalSize}}),Object.defineProperty(e,"clickFooterButton",{enumerable:!0,get:function(){return t.clickFooterButton}}),Object.defineProperty(e,"update",{enumerable:!0,get:function(){return t.update}}),Object.defineProperty(e,"data",{enumerable:!0,get:function(){return t.data}}),Object.defineProperty(e,"isMessageModal",{enumerable:!0,get:function(){return t.isMessageModal}}),Object.defineProperty(e,"Modal",{enumerable:!0,get:function(){return t.Modal}});var o=function(i,n){return r.isIframeModal(n)?new r.ModalIframe(i,n):new r.ModalMessage(i,n)};e.create=o})(Ae);var Te={},Ie={},C={};Object.defineProperty(C,"__esModule",{value:!0});C.isPermitted=C.getPermissionKey=C.isPerformanceOrWebVitalsAction=C.isAppMessage=C.isAppBridgeAction=void 0;var tt=ee,Y=U,nt=j;function rt(e){return e instanceof Object&&Object.prototype.hasOwnProperty.call(e,"type")&&e.type.toString().startsWith(Y.PREFIX)}C.isAppBridgeAction=rt;function it(e){if(typeof e!="object"||!e.data||typeof e.data!="object")return!1;var r=e.data;return Object.prototype.hasOwnProperty.call(r,"type")&&nt.findMatchInEnum(tt.MessageType,r.type)!==void 0}C.isAppMessage=it;function ot(e){var r=e.type;return r.match(/^APP::(PERFORMANCE|WEB_VITALS)::/)}C.isPerformanceOrWebVitalsAction=ot;function we(e){return e.replace(new RegExp("^"+Y.PREFIX+Y.SEPARATOR+"\\w+"+Y.SEPARATOR),"")}C.getPermissionKey=we;function at(e,r,t){var o=r.group,i=r.type;if(!o||!Object.prototype.hasOwnProperty.call(e,o))return!1;var n=e[o];if(!n)return!1;var u=we(i);return n[u]?n[u][t]===!0:!1}C.isPermitted=at;var Q={};(function(e){var r,t;Object.defineProperty(e,"__esModule",{value:!0}),e.isUnframed=e.isClient=e.isServer=void 0,e.isServer=typeof window>"u",e.isClient=!e.isServer,e.isUnframed=e.isClient&&((t=(r=window.navigator)===null||r===void 0?void 0:r.userAgent)===null||t===void 0?void 0:t.indexOf("Unframed"))>0})(Q);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createTransportListener=e.fromWindow=e.fromFrame=e.Context=void 0;var r=$,t=C,o=ee,i=L,n=Q;(function(c){c.Modal="Modal",c.Main="Main"})(e.Context||(e.Context={}));function u(c,s,b){var d=[],f=c.host,l=c.window;if(!f)throw r.fromAction("App frame is undefined",r.AppActionType.WINDOW_UNDEFINED);return n.isUnframed&&window.MobileWebView&&Object.assign(window.MobileWebView,{postMessageToIframe:function(v,A){l==null||l.postMessage(v,A),a(v)&&f.postMessage(JSON.stringify(v.payload),location.origin)},updateIframeUrl:function(v){var A=window.location,P=(c.window||{}).location;try{var M=new URL(v).origin;M===s&&P?P.replace(v):A.href=v}catch{}}}),f.addEventListener("message",function(v){if(!(v.source===f||!t.isAppMessage(v))){if(v.origin!==s){var A="Message origin '"+v.origin+"' does not match app origin '"+s+"'.",P=r.invalidOriginAction(A),M={type:"dispatch",payload:P};l==null||l.postMessage(M,v.origin);return}if(n.isUnframed&&window.MobileWebView){var P=JSON.stringify({id:"unframed://fromClient",origin:s,data:v.data});window.MobileWebView.postMessage(P);return}for(var T=0,B=d;T<B.length;T++){var g=B[T];g(v)}}}),{context:b,localOrigin:s,frameWindow:l,hostFrame:f,dispatch:function(v){l==null||l.postMessage(v,s)},subscribe:function(v){return i.addAndRemoveFromCollection(d,v)}}}e.fromFrame=u;function h(c,s){var b=[];return typeof window!==void 0&&window.addEventListener("message",function(d){if(!(window===c&&!n.isUnframed||d.source!==c||!(t.isAppBridgeAction(d.data.payload)||t.isAppMessage(d))))for(var f=0,l=b;f<l.length;f++){var v=l[f];v(d)}}),{localOrigin:s,hostFrame:c,dispatch:function(d){var f;if(!((f=d.source)===null||f===void 0)&&f.host){if(n.isUnframed&&window&&window.MobileWebView){var l=JSON.stringify({id:"unframed://fromClient",origin:s,data:d});window.MobileWebView.postMessage(l);return}var v=new URL("https://"+d.source.host).origin;c.postMessage(d,v)}},subscribe:function(d){return i.addAndRemoveFromCollection(b,d)}}}e.fromWindow=h;function p(){var c=[],s={};function b(d){function f(){if(arguments.length<2)return i.addAndRemoveFromCollection(c,{callback:arguments[0]});var l=Array.from(arguments),v=l[0],A=l[1],P=l[2],M={callback:A,id:P},T={type:v,id:P};return Object.prototype.hasOwnProperty.call(s,v)||(s[v]=[]),d&&d(o.MessageType.Subscribe,T),i.addAndRemoveFromCollection(s[v],M,function(){d&&d(o.MessageType.Unsubscribe,T)})}return f}return{createSubscribeHandler:b,handleMessage:function(d){c.forEach(function(f){return f.callback(d)})},handleActionDispatch:function(d){var f=d.type,l=d.payload,v=!1;if(Object.prototype.hasOwnProperty.call(s,f))for(var A=0,P=s[f];A<P.length;A++){var M=P[A],T=M.id,B=M.callback,g=l&&l.id===T;(g||!T)&&(B(l),v=!0)}return v}}}e.createTransportListener=p;function a(c){return c!==null&&typeof c=="object"&&!Array.isArray(c)&&c.type==="dispatch"&&typeof c.payload=="object"}})(Ie);(function(e){var r=y&&y.__createBinding||(Object.create?function(o,i,n,u){u===void 0&&(u=n),Object.defineProperty(o,u,{enumerable:!0,get:function(){return i[n]}})}:function(o,i,n,u){u===void 0&&(u=n),o[u]=i[n]}),t=y&&y.__exportStar||function(o,i){for(var n in o)n!=="default"&&!Object.prototype.hasOwnProperty.call(i,n)&&r(i,o,n)};Object.defineProperty(e,"__esModule",{value:!0}),t(Ie,e)})(Te);var R={},Re={};(function(e){var r={};Object.defineProperty(e,"__esModule",{value:!0}),e.isDevelopmentClient=e.isProduction=e.isDevelopment=e.isUnframed=e.isServer=e.isClient=void 0;var t=Q,o=Q;Object.defineProperty(e,"isClient",{enumerable:!0,get:function(){return o.isClient}}),Object.defineProperty(e,"isServer",{enumerable:!0,get:function(){return o.isServer}}),Object.defineProperty(e,"isUnframed",{enumerable:!0,get:function(){return o.isUnframed}}),e.isDevelopment=typeof process<"u"&&r&&!1,e.isProduction=!e.isDevelopment,e.isDevelopmentClient=e.isDevelopment&&t.isClient})(Re);Object.defineProperty(R,"__esModule",{value:!0});R.isShopifyPing=R.isShopifyPOS=R.isShopifyMobile=R.isShopifyEmbedded=R.isMobile=void 0;var he=Re;function ut(){return Ce()||Ne()||je()}R.isMobile=ut;function ct(){return he.isClient&&window.top!==window.self||he.isUnframed}R.isShopifyEmbedded=ct;function Ce(){return typeof navigator<"u"&&navigator.userAgent.indexOf("Shopify Mobile")>=0}R.isShopifyMobile=Ce;function Ne(){return typeof navigator<"u"&&navigator.userAgent.indexOf("Shopify POS")>=0}R.isShopifyPOS=Ne;function je(){return typeof navigator<"u"&&navigator.userAgent.indexOf("Shopify Ping")>=0}R.isShopifyPing=je;var st=y&&y.__awaiter||function(e,r,t,o){function i(n){return n instanceof t?n:new t(function(u){u(n)})}return new(t||(t=Promise))(function(n,u){function h(c){try{a(o.next(c))}catch(s){u(s)}}function p(c){try{a(o.throw(c))}catch(s){u(s)}}function a(c){c.done?n(c.value):i(c.value).then(h,p)}a((o=o.apply(e,r||[])).next())})},ft=y&&y.__generator||function(e,r){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},o,i,n,u;return u={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(a){return function(c){return p([a,c])}}function p(a){if(o)throw new TypeError("Generator is already executing.");for(;t;)try{if(o=1,i&&(n=a[0]&2?i.return:a[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,a[1])).done)return n;switch(i=0,n&&(a=[a[0]&2,n.value]),a[0]){case 0:case 1:n=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,i=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!n||a[1]>n[0]&&a[1]<n[3])){t.label=a[1];break}if(a[0]===6&&t.label<n[1]){t.label=n[1],n=a;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(a);break}n[2]&&t.ops.pop(),t.trys.pop();continue}a=r.call(e,t)}catch(c){a=[6,c],i=0}finally{o=n=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(k,"__esModule",{value:!0});k.createMutationObserver=k.setupModalAutoSizing=void 0;var lt=Ae,dt=Te,pt=R,ae="app-bridge-utils-modal-auto-size",X=ht();function ht(){if(typeof document>"u")return null;var e=document.createElement("style");return e.type="text/css",e.innerHTML="."+ae+" { overflow: hidden; height: auto; min-height: auto; }",e}function vt(e,r){if(!X)return function(){};var t=document.getElementsByTagName("head")[0],o=document.body.classList;t.appendChild(X),o.add(ae);var i=De(e,r);return function(){o.remove(ae),t.contains(X)&&t.removeChild(X),i&&i.disconnect()}}function yt(e){return st(this,void 0,void 0,function(){function r(){o&&(o(),o=void 0)}function t(i){var n=i.context,u=i.modal.id;return pt.isMobile()||n!==dt.Context.Modal?(r(),r):(o||(o=vt(e,u)),r)}var o;return ft(this,function(i){switch(i.label){case 0:return[4,e.getState().then(t)];case 1:return i.sent(),[2,r]}})})}k.setupModalAutoSizing=yt;function De(e,r){if(typeof document>"u")return;var t=-1,o,i={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0},n=new MutationObserver(u);n.observe(document,i),h();function u(){o&&window.clearTimeout(o),o=window.setTimeout(h,16)}function h(){var p=document.body.scrollHeight;p!==t&&(t=p,e.dispatch(lt.updateModalSize({id:r,height:String(p)})))}return n}k.createMutationObserver=De;var Be={},H={},Ue={},Le={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.respond=e.request=e.Action=void 0;var r=j,t=D,o;(function(u){u.REQUEST="APP::SESSION_TOKEN::REQUEST",u.RESPOND="APP::SESSION_TOKEN::RESPOND"})(o=e.Action||(e.Action={}));function i(){return r.actionWrapper({group:t.Group.SessionToken,type:o.REQUEST})}e.request=i;function n(u){return r.actionWrapper({payload:u,group:t.Group.SessionToken,type:o.RESPOND})}e.respond=n})(Le);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.respond=e.request=e.Action=void 0;var r=Le;Object.defineProperty(e,"Action",{enumerable:!0,get:function(){return r.Action}}),Object.defineProperty(e,"request",{enumerable:!0,get:function(){return r.request}}),Object.defineProperty(e,"respond",{enumerable:!0,get:function(){return r.respond}})})(Ue);var le={},de={};const bt="@shopify/app-bridge",gt="3.7.10",_t={name:bt,version:gt};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getPackageName=e.getVersion=e.getMergedProps=e.updateActionFromPayload=e.isValidOptionalString=e.isValidOptionalNumber=e.NonSnakeCaseGroup=e.getEventNameSpace=e.forEachInEnum=e.findMatchInEnum=e.actionWrapper=void 0;var r=j;Object.defineProperty(e,"actionWrapper",{enumerable:!0,get:function(){return r.actionWrapper}}),Object.defineProperty(e,"findMatchInEnum",{enumerable:!0,get:function(){return r.findMatchInEnum}}),Object.defineProperty(e,"forEachInEnum",{enumerable:!0,get:function(){return r.forEachInEnum}}),Object.defineProperty(e,"getEventNameSpace",{enumerable:!0,get:function(){return r.getEventNameSpace}}),Object.defineProperty(e,"NonSnakeCaseGroup",{enumerable:!0,get:function(){return r.NonSnakeCaseGroup}}),Object.defineProperty(e,"isValidOptionalNumber",{enumerable:!0,get:function(){return r.isValidOptionalNumber}}),Object.defineProperty(e,"isValidOptionalString",{enumerable:!0,get:function(){return r.isValidOptionalString}}),Object.defineProperty(e,"updateActionFromPayload",{enumerable:!0,get:function(){return r.updateActionFromPayload}}),Object.defineProperty(e,"getMergedProps",{enumerable:!0,get:function(){return r.getMergedProps}});var t=_t;function o(){return t.version}e.getVersion=o;function i(){return t.name}e.getPackageName=i})(de);var pe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ComponentType=e.Group=void 0;var r=D;Object.defineProperty(e,"Group",{enumerable:!0,get:function(){return r.Group}}),Object.defineProperty(e,"ComponentType",{enumerable:!0,get:function(){return r.ComponentType}})})(pe);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.networkAction=e.persistenceAction=e.unsupportedOperationAction=e.unexpectedAction=e.invalidAction=e.invalidActionType=e.invalidPayload=e.Message=e.fromAction=e.Action=e.permissionAction=e.isErrorEventName=e.throwError=e.invalidOriginAction=e.AppBridgeError=e.AppActionType=void 0;var r=$;Object.defineProperty(e,"Action",{enumerable:!0,get:function(){return r.Action}}),Object.defineProperty(e,"fromAction",{enumerable:!0,get:function(){return r.fromAction}});var t=de,o=pe,i=$;Object.defineProperty(e,"AppActionType",{enumerable:!0,get:function(){return i.AppActionType}}),Object.defineProperty(e,"AppBridgeError",{enumerable:!0,get:function(){return i.AppBridgeError}}),Object.defineProperty(e,"invalidOriginAction",{enumerable:!0,get:function(){return i.invalidOriginAction}}),Object.defineProperty(e,"throwError",{enumerable:!0,get:function(){return i.throwError}}),Object.defineProperty(e,"isErrorEventName",{enumerable:!0,get:function(){return i.isErrorEventName}}),Object.defineProperty(e,"permissionAction",{enumerable:!0,get:function(){return i.permissionAction}});function n(d,f,l){var v=f.payload;return t.actionWrapper({type:d,group:o.Group.Error,payload:{action:f,message:l,type:d,id:v&&v.id?v.id:void 0}})}(function(d){d.MISSING_PAYLOAD="Missing payload",d.INVALID_PAYLOAD_ID="Id in payload is missing or invalid"})(e.Message||(e.Message={}));function u(d,f){return n(r.Action.INVALID_PAYLOAD,d,f||"The action's payload is missing required properties or has invalid properties")}e.invalidPayload=u;function h(d,f){return t.actionWrapper({group:o.Group.Error,payload:{action:d,message:f||"The action type is invalid or unsupported",type:r.Action.INVALID_ACTION_TYPE},type:r.Action.INVALID_ACTION_TYPE})}e.invalidActionType=h;function p(d,f){return t.actionWrapper({group:o.Group.Error,payload:{action:d,message:f||"The action's has missing/invalid values for `group`, `type` or `version`",type:r.Action.INVALID_ACTION},type:r.Action.INVALID_ACTION})}e.invalidAction=p;function a(d,f){return t.actionWrapper({group:o.Group.Error,payload:{action:d,message:f||"Action cannot be called at this time",type:r.Action.UNEXPECTED_ACTION},type:r.Action.UNEXPECTED_ACTION})}e.unexpectedAction=a;function c(d,f){return n(r.Action.UNSUPPORTED_OPERATION,d,f||"The action type is unsupported")}e.unsupportedOperationAction=c;function s(d,f){return n(r.Action.PERSISTENCE,d,f||"Action cannot be persisted on server")}e.persistenceAction=s;function b(d,f){return n(r.Action.NETWORK,d,f||"Network error")}e.networkAction=b})(le);var Pt=y&&y.__createBinding||(Object.create?function(e,r,t,o){o===void 0&&(o=t),Object.defineProperty(e,o,{enumerable:!0,get:function(){return r[t]}})}:function(e,r,t,o){o===void 0&&(o=t),e[o]=r[t]}),Ot=y&&y.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),At=y&&y.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&Pt(r,e,t);return Ot(r,e),r},mt=y&&y.__awaiter||function(e,r,t,o){function i(n){return n instanceof t?n:new t(function(u){u(n)})}return new(t||(t=Promise))(function(n,u){function h(c){try{a(o.next(c))}catch(s){u(s)}}function p(c){try{a(o.throw(c))}catch(s){u(s)}}function a(c){c.done?n(c.value):i(c.value).then(h,p)}a((o=o.apply(e,r||[])).next())})},Et=y&&y.__generator||function(e,r){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},o,i,n,u;return u={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(a){return function(c){return p([a,c])}}function p(a){if(o)throw new TypeError("Generator is already executing.");for(;t;)try{if(o=1,i&&(n=a[0]&2?i.return:a[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,a[1])).done)return n;switch(i=0,n&&(a=[a[0]&2,n.value]),a[0]){case 0:case 1:n=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,i=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!n||a[1]>n[0]&&a[1]<n[3])){t.label=a[1];break}if(a[0]===6&&t.label<n[1]){t.label=n[1],n=a;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(a);break}n[2]&&t.ops.pop(),t.trys.pop();continue}a=r.call(e,t)}catch(c){a=[6,c],i=0}finally{o=n=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(H,"__esModule",{value:!0});H.getSessionToken=void 0;var ve=At(Ue),ye=le;function St(e){return mt(this,void 0,void 0,function(){return Et(this,function(r){return[2,new Promise(function(t,o){var i=e.subscribe(ve.Action.RESPOND,function(n){var u=n.sessionToken;u?t(u):o(ye.fromAction("Failed to retrieve a session token",ye.Action.FAILED_AUTHENTICATION)),i()});e.dispatch(ve.request())})]})})}H.getSessionToken=St;var te={},Z=y&&y.__assign||function(){return Z=Object.assign||function(e){for(var r,t=1,o=arguments.length;t<o;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Z.apply(this,arguments)},Mt=y&&y.__awaiter||function(e,r,t,o){function i(n){return n instanceof t?n:new t(function(u){u(n)})}return new(t||(t=Promise))(function(n,u){function h(c){try{a(o.next(c))}catch(s){u(s)}}function p(c){try{a(o.throw(c))}catch(s){u(s)}}function a(c){c.done?n(c.value):i(c.value).then(h,p)}a((o=o.apply(e,r||[])).next())})},Tt=y&&y.__generator||function(e,r){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},o,i,n,u;return u={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(a){return function(c){return p([a,c])}}function p(a){if(o)throw new TypeError("Generator is already executing.");for(;t;)try{if(o=1,i&&(n=a[0]&2?i.return:a[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,a[1])).done)return n;switch(i=0,n&&(a=[a[0]&2,n.value]),a[0]){case 0:case 1:n=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,i=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!n||a[1]>n[0]&&a[1]<n[3])){t.label=a[1];break}if(a[0]===6&&t.label<n[1]){t.label=n[1],n=a;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(a);break}n[2]&&t.ops.pop(),t.trys.pop();continue}a=r.call(e,t)}catch(c){a=[6,c],i=0}finally{o=n=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(te,"__esModule",{value:!0});te.authenticatedFetch=void 0;var It=H;function wt(e,r){var t=this;return r===void 0&&(r=fetch),function(o,i){return i===void 0&&(i={}),Mt(t,void 0,void 0,function(){var n,u,h;return Tt(this,function(p){switch(p.label){case 0:return[4,It.getSessionToken(e)];case 1:return n=p.sent(),u=new Headers(i.headers),u.append("Authorization","Bearer "+n),u.append("X-Requested-With","XMLHttpRequest"),h={},u.forEach(function(a,c){h[c]=a}),[2,r(o,Z(Z({},i),{headers:h}))]}})})}}te.authenticatedFetch=wt;(function(e){var r=y&&y.__createBinding||(Object.create?function(o,i,n,u){u===void 0&&(u=n),Object.defineProperty(o,u,{enumerable:!0,get:function(){return i[n]}})}:function(o,i,n,u){u===void 0&&(u=n),o[u]=i[n]}),t=y&&y.__exportStar||function(o,i){for(var n in o)n!=="default"&&!Object.prototype.hasOwnProperty.call(i,n)&&r(i,o,n)};Object.defineProperty(e,"__esModule",{value:!0}),t(H,e),t(te,e)})(Be);var Fe={},q={},Ge={},ue={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.respond=e.Action=void 0;var r=j,t=D,o;(function(n){n.REQUEST="APP::AUTH_CODE::REQUEST",n.RESPOND="APP::AUTH_CODE::RESPOND"})(o=e.Action||(e.Action={}));function i(n){return r.actionWrapper({payload:n,group:t.Group.AuthCode,type:o.RESPOND})}e.respond=i})(ue);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.request=e.Action=e.respond=void 0;var r=ue;Object.defineProperty(e,"Action",{enumerable:!0,get:function(){return r.Action}});var t=de,o=pe,i=ue;Object.defineProperty(e,"respond",{enumerable:!0,get:function(){return i.respond}});function n(u){return t.actionWrapper({group:o.Group.AuthCode,type:r.Action.REQUEST,payload:{id:u}})}e.request=n})(Ge);var ke={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.generateUuid=void 0;var r=W;Object.defineProperty(e,"generateUuid",{enumerable:!0,get:function(){return r.generateUuid}}),e.default=r.generateUuid})(ke);var Rt=y&&y.__createBinding||(Object.create?function(e,r,t,o){o===void 0&&(o=t),Object.defineProperty(e,o,{enumerable:!0,get:function(){return r[t]}})}:function(e,r,t,o){o===void 0&&(o=t),e[o]=r[t]}),Ct=y&&y.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),Nt=y&&y.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&Rt(r,e,t);return Ct(r,e),r},jt=y&&y.__awaiter||function(e,r,t,o){function i(n){return n instanceof t?n:new t(function(u){u(n)})}return new(t||(t=Promise))(function(n,u){function h(c){try{a(o.next(c))}catch(s){u(s)}}function p(c){try{a(o.throw(c))}catch(s){u(s)}}function a(c){c.done?n(c.value):i(c.value).then(h,p)}a((o=o.apply(e,r||[])).next())})},Dt=y&&y.__generator||function(e,r){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},o,i,n,u;return u={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(a){return function(c){return p([a,c])}}function p(a){if(o)throw new TypeError("Generator is already executing.");for(;t;)try{if(o=1,i&&(n=a[0]&2?i.return:a[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,a[1])).done)return n;switch(i=0,n&&(a=[a[0]&2,n.value]),a[0]){case 0:case 1:n=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,i=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!n||a[1]>n[0]&&a[1]<n[3])){t.label=a[1];break}if(a[0]===6&&t.label<n[1]){t.label=n[1],n=a;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(a);break}n[2]&&t.ops.pop(),t.trys.pop();continue}a=r.call(e,t)}catch(c){a=[6,c],i=0}finally{o=n=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Bt=y&&y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(q,"__esModule",{value:!0});q.getAuthorizationCodePayload=void 0;var be=Nt(Ge),ge=le,Ut=Bt(ke);function Lt(e){return jt(this,void 0,void 0,function(){return Dt(this,function(r){return[2,new Promise(function(t,o){var i=Ut.default(),n=e.subscribe(be.Action.RESPOND,function(u){switch(u==null?void 0:u.status){case"needsExchange":t(u);break;default:o(ge.fromAction("Failed to retrieve an authorization code",ge.Action.FAILED_AUTHENTICATION))}n()},i);e.dispatch(be.request(i))})]})})}q.getAuthorizationCodePayload=Lt;var ne={},Ft=y&&y.__awaiter||function(e,r,t,o){function i(n){return n instanceof t?n:new t(function(u){u(n)})}return new(t||(t=Promise))(function(n,u){function h(c){try{a(o.next(c))}catch(s){u(s)}}function p(c){try{a(o.throw(c))}catch(s){u(s)}}function a(c){c.done?n(c.value):i(c.value).then(h,p)}a((o=o.apply(e,r||[])).next())})},Gt=y&&y.__generator||function(e,r){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},o,i,n,u;return u={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(a){return function(c){return p([a,c])}}function p(a){if(o)throw new TypeError("Generator is already executing.");for(;t;)try{if(o=1,i&&(n=a[0]&2?i.return:a[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,a[1])).done)return n;switch(i=0,n&&(a=[a[0]&2,n.value]),a[0]){case 0:case 1:n=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,i=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!n||a[1]>n[0]&&a[1]<n[3])){t.label=a[1];break}if(a[0]===6&&t.label<n[1]){t.label=n[1],n=a;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(a);break}n[2]&&t.ops.pop(),t.trys.pop();continue}a=r.call(e,t)}catch(c){a=[6,c],i=0}finally{o=n=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(ne,"__esModule",{value:!0});ne.userAuthorizedFetch=void 0;var kt=q,Wt="auth/shopify/callback";function Vt(e){var r=e.headers.get("X-Shopify-API-Request-Failure-Unauthorized");return r?r.toLowerCase()==="true":!1}function zt(e){var r=this,t=e.app,o=e.callbackUri,i=o===void 0?Wt:o,n=e.isAuthorizationCodeRequired,u=n===void 0?Vt:n,h=e.fetchOperation;return function(p,a){return Ft(r,void 0,void 0,function(){var c,s,b,d,f,l,v,A;return Gt(this,function(P){switch(P.label){case 0:return[4,h(p,a)];case 1:return c=P.sent(),u(c)?[4,kt.getAuthorizationCodePayload(t)]:[2,c];case 2:return s=P.sent(),b=s.code,d=s.hmac,f=s.shop,l=s.timestamp,v=encodeURI("https://"+window.location.hostname+"/"+i+"?code="+b+"&hmac="+d+"&shop="+f+"&timestamp="+l),[4,h(v,{})];case 3:if(A=P.sent(),!A.ok)throw new Error("Failed to authorize request.");return[2,h(p,a)]}})})}}ne.userAuthorizedFetch=zt;(function(e){var r=y&&y.__createBinding||(Object.create?function(o,i,n,u){u===void 0&&(u=n),Object.defineProperty(o,u,{enumerable:!0,get:function(){return i[n]}})}:function(o,i,n,u){u===void 0&&(u=n),o[u]=i[n]}),t=y&&y.__exportStar||function(o,i){for(var n in o)n!=="default"&&!Object.prototype.hasOwnProperty.call(i,n)&&r(i,o,n)};Object.defineProperty(e,"__esModule",{value:!0}),t(q,e),t(ne,e)})(Fe);(function(e){var r=y&&y.__createBinding||(Object.create?function(o,i,n,u){u===void 0&&(u=n),Object.defineProperty(o,u,{enumerable:!0,get:function(){return i[n]}})}:function(o,i,n,u){u===void 0&&(u=n),o[u]=i[n]}),t=y&&y.__exportStar||function(o,i){for(var n in o)n!=="default"&&!Object.prototype.hasOwnProperty.call(i,n)&&r(i,o,n)};Object.defineProperty(e,"__esModule",{value:!0}),t(k,e),t(R,e),t(Be,e),t(Fe,e)})(Oe);(function(e){var r=y&&y.__createBinding||(Object.create?function(o,i,n,u){u===void 0&&(u=n),Object.defineProperty(o,u,{enumerable:!0,get:function(){return i[n]}})}:function(o,i,n,u){u===void 0&&(u=n),o[u]=i[n]}),t=y&&y.__exportStar||function(o,i){for(var n in o)n!=="default"&&!Object.prototype.hasOwnProperty.call(i,n)&&r(i,o,n)};Object.defineProperty(e,"__esModule",{value:!0}),t(Oe,e)})(Pe);const _e=window.__SHOPIFY_APP_BRIDGE__;function We(){const e=new URLSearchParams(window.location.search),r=e.get("shop")||void 0,t=e.get("id_token")||void 0;return async function(i,{method:n="GET",params:u,body:h,headers:p}={}){const a=new URL(i,window.location.origin),c=new URLSearchParams(u||{}),s=/\/shop\/[^/?]+/.test(a.pathname),b=a.searchParams.has("shop")||c.has("shop");!s&&!b&&r&&c.set("shop",r),[...c.keys()].length&&(a.search=(a.search?a.search+"&":"?")+c.toString());const d={...p};if(t&&(d.Authorization=`Bearer ${t}`),n!=="GET"&&!d["Content-Type"]&&(d["Content-Type"]="application/json"),_e&&!t)try{const v=await Pe.getSessionToken(_e);d.Authorization=`Bearer ${v}`}catch(v){console.warn("[API] Failed to get session token:",v)}const f=await fetch(a.toString(),{method:n,headers:d,body:n!=="GET"&&h?JSON.stringify(h):void 0});if(!f.ok){let v;if((f.headers.get("content-type")||"").includes("application/json"))try{v=await f.json()}catch{v={error:await f.text().catch(()=>f.statusText)}}else v={error:await f.text().catch(()=>f.statusText)};if(f.status===402&&v){const M=new Error(v.error||v.message||"Payment Required");throw M.status=402,Object.assign(M,v),M}const P=new Error(v.error||v.message||f.statusText);throw P.status=f.status,P}return(f.headers.get("content-type")||"").includes("application/json")?f.json():f.text()}}async function $t(e,r={}){return We()(e,r)}async function Ht(e,r,t={}){return We()(e,{method:"POST",body:r,...t})}const qt=(e,r="")=>{try{return new URLSearchParams(window.location.search).get(e)||r}catch{return r}};function Xt(){const e=qt("shop","");return{api:$e.useMemo(()=>async(t,o={})=>{const i=new URL(t,window.location.origin);return!i.searchParams.has("shop")&&e&&i.searchParams.set("shop",e),o.method==="POST"||o.body?Ht(i.pathname+i.search,o.body||{},o):$t(i.pathname+i.search,o)},[e]),shop:e}}export{Xt as u};
