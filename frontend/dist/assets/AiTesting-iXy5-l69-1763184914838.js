import{j as e}from"./app-bridge-Dll4AwN--1763184914838.js";import{r as l,R as pe}from"./react-vendor-tAaa2TlE-1763184914838.js";import{m as je}from"./sessionFetch-CJepNHo3-1763184914838.js";import{I as me}from"./InsufficientTokensModal-L7j7HThB-1763184914838.js";import{T as be}from"./TrialActivationModal-BFZpu3mi-1763184914838.js";import{g as _}from"./usePlanHierarchy-BjUEvxZF-1763184914838.js";import{a as c,d as f,T as s,L as B,C as E,B as p,I as o,b as d,e as ee,f as a,D as A,h as fe,k as Se,M as P}from"./polaris-DkgsK6SL-1763184914838.js";const ye=(F,h="")=>{try{return new URLSearchParams(window.location.search).get(F)||h}catch{return h}};function Re({shop:F}){const h=F||ye("shop",""),se=i=>{const t=new URLSearchParams(window.location.search),r=t.toString()?`?${t.toString()}`:"";window.location.href=`${i}${r}`},[G,x]=l.useState(""),S=l.useMemo(()=>je(),[]),[y,z]=l.useState(null),[W,v]=l.useState(""),[ne,O]=l.useState(!1),[j,te]=l.useState(null),[q,ie]=l.useState(""),[ae,T]=l.useState(!1),[re,D]=l.useState(!1),[oe,J]=l.useState(!1),[u,m]=l.useState(null),[ce,N]=l.useState(!1),[b,we]=l.useState(null),[w,V]=l.useState({}),[I,Q]=l.useState(!1),[le,Y]=l.useState(0),[n,H]=l.useState({}),[M,K]=l.useState(!1),[de,X]=l.useState(0),[L,$]=l.useState(null),[Ae,Z]=l.useState(null);l.useEffect(()=>{h&&(he(),C())},[h,S]),l.useEffect(()=>{const i=()=>{!document.hidden&&h&&C()};return document.addEventListener("visibilitychange",i),()=>{document.removeEventListener("visibilitychange",i)}},[h,S]);const he=async()=>{var i,t,r;try{const g=await S(`/api/billing/info?shop=${h}`),xe=((i=g==null?void 0:g.subscription)==null?void 0:i.plan)||"Starter";z(xe),$(((t=g==null?void 0:g.tokens)==null?void 0:t.balance)||0),Z(((r=g==null?void 0:g.subscription)==null?void 0:r.trialEndsAt)||null)}catch(g){console.error("[AI-TESTING] Error loading billing info:",g),z("Starter"),$(0)}},C=async()=>{var i,t;try{const r=await S(`/api/billing/info?shop=${h}`);$(((i=r==null?void 0:r.tokens)==null?void 0:i.balance)||0),Z(((t=r==null?void 0:r.subscription)==null?void 0:t.trialEndsAt)||null)}catch(r){console.error("[AI-TESTING] Error loading token balance:",r)}},k=i=>{if(!y)return!1;const t=_(y);switch(i){case"productsJson":return t>=0;case"storeMetadata":return t>=1;case"welcomePage":case"collectionsJson":return t>=2;case"aiSitemap":return t>=3;case"schemaData":return t>=4;case"meta":return t>=0;case"claude":return t>=0;case"gemini":return t>=1;case"chatgpt":return t>=2;case"perplexity":return t>=3;case"deepseek":return t>=4;default:return!1}},U=(i,t)=>{te({name:i,url:t}),O(!0)},ue=async()=>{Q(!0),Y(0),V({});try{const i=await S("/api/ai-testing/run-tests",{method:"POST",body:{shop:h}});i.results?(V(i.results),Y(100),x("Basic tests completed!")):x("Testing failed. Please try again.")}catch(i){console.error("[AI-TESTING] Error running tests:",i),x("Failed to run tests. Please try again.")}finally{Q(!1)}},ge=async()=>{if(_(y)<1){m({message:"AI-powered validation requires Professional plan or higher",requiredPlan:"Professional",currentPlan:y||"Starter"}),T(!0);return}K(!0),X(0),H({});try{const t=await S("/api/ai-testing/ai-validate",{method:"POST",body:{shop:h,endpointResults:w}});t.results?(H(t.results),X(100),x(`AI validation completed! (${t.tokensUsed||0} tokens used)`),C()):x("AI validation failed. Please try again.")}catch(t){if(console.error("[AI-TESTING] Error running AI validation:",t),t.status===402){if(t.trialRestriction&&t.requiresActivation){m(t),J(!0);return}if(t.requiresUpgrade){m(t),T(!0);return}if(t.requiresPurchase){m(t),D(!0);return}}x("Failed to run AI validation. Please try again.")}finally{K(!1)}},R=async(i,t=null)=>{try{v("Generating AI response...");let r=`/api/ai-discovery/simulate?shop=${h}&type=${i}`;t&&(r+=`&question=${encodeURIComponent(t)}`);const g=await S(r,{method:"GET"});v(g.response||"No response generated")}catch(r){if(console.error("[AI-TESTING] Simulation error:",r),r.status===402){if(r.trialRestriction&&r.requiresActivation){m(r),J(!0),v("");return}if(r.requiresUpgrade){m(r),T(!0),v("");return}if(r.requiresPurchase){m(r),D(!0),v("");return}}v("Error generating response. Please try again."),x("Failed to simulate AI response")}};return e.jsxs(e.Fragment,{children:[e.jsxs(c,{gap:"400",children:[e.jsx(f,{tone:"info",children:e.jsx(s,{children:"Test how AI models discover and understand your store content. Check if your structured data and AI Discovery features are working correctly."})}),e.jsxs(B,{children:[e.jsx(B.Section,{variant:"oneHalf",children:e.jsx(E,{children:e.jsx(p,{padding:"300",children:e.jsxs(c,{gap:"400",children:[e.jsxs(o,{align:"space-between",blockAlign:"center",children:[e.jsxs(c,{gap:"100",children:[e.jsx(s,{as:"h3",variant:"headingMd",children:"ðŸ”§ Basic AIEO Tests"}),e.jsx(s,{variant:"bodySm",tone:"subdued",children:"Quick check if endpoints are accessible and returning data"})]}),e.jsx(d,{onClick:ue,loading:I,disabled:I,children:I?"Testing...":"Run Basic Tests"})]}),I&&e.jsx(p,{children:e.jsxs(c,{gap:"200",children:[e.jsx(s,{variant:"bodySm",children:"Testing endpoints..."}),e.jsx(ee,{progress:le,size:"small"})]})}),Object.keys(w).length>0&&e.jsx(c,{gap:"300",children:Object.entries(w).map(([i,t],r)=>{const g=r===Object.entries(w).length-1;return e.jsxs(pe.Fragment,{children:[e.jsx(o,{align:"space-between",blockAlign:"center",children:e.jsxs(c,{gap:"100",children:[e.jsxs(o,{gap:"200",blockAlign:"center",children:[e.jsx(s,{variant:"bodyMd",fontWeight:"semibold",children:t.name}),t.status==="success"&&e.jsx(a,{tone:"success",children:"âœ“ OK"}),t.status==="warning"&&e.jsx(a,{tone:"warning",children:"âš ï¸ Warning"}),t.status==="error"&&e.jsx(a,{tone:"critical",children:"âœ— Failed"}),t.status==="locked"&&e.jsx(a,{children:"ðŸ”’ Locked"})]}),e.jsx(s,{variant:"bodySm",tone:"subdued",children:t.message}),t.actionLink&&e.jsx(d,{size:"slim",onClick:()=>se(t.actionLink),children:i==="basicSitemap"?"Go to Sitemap":i==="aiSitemap"?"Go to Settings":"Go"})]})}),!g&&e.jsx(A,{})]},i)})}),Object.keys(w).length===0&&!I&&e.jsx(f,{tone:"info",children:e.jsx(s,{children:'Click "Run Basic Tests" to check if your AI Discovery endpoints are configured correctly.'})})]})})})}),e.jsx(B.Section,{variant:"oneHalf",children:e.jsx(E,{children:e.jsx(p,{padding:"300",children:e.jsxs(c,{gap:"400",children:[e.jsxs(o,{align:"space-between",blockAlign:"center",children:[e.jsxs(c,{gap:"100",children:[e.jsxs(o,{gap:"200",blockAlign:"center",children:[e.jsx(s,{as:"h3",variant:"headingMd",children:"ðŸ¤– AI-Powered Validation"}),L!==null&&e.jsxs(a,{tone:L>50?"success":"warning",children:[L," tokens"]}),e.jsx(d,{size:"micro",onClick:()=>C(),accessibilityLabel:"Refresh token balance",children:"ðŸ”„"})]}),e.jsx(s,{variant:"bodySm",tone:"subdued",children:"Deep analysis with AI bot"}),y&&e.jsx(s,{variant:"bodySm",tone:"subdued",children:"Requires: Professional+ plan & pay-per-use tokens"})]}),e.jsx(d,{onClick:ge,loading:M,disabled:M||Object.keys(w).length===0,variant:"primary",children:M?"Validating...":"Test with AI Bot"})]}),M&&e.jsx(p,{children:e.jsxs(c,{gap:"200",children:[e.jsx(s,{variant:"bodySm",children:"AI is analyzing your endpoints..."}),e.jsx(ee,{progress:de,size:"small",tone:"primary"})]})}),Object.keys(n).length>0&&e.jsxs(c,{gap:"300",children:[n.productsJson&&e.jsxs(e.Fragment,{children:[e.jsx(o,{align:"space-between",blockAlign:"center",children:e.jsxs(c,{gap:"100",children:[e.jsxs(o,{gap:"200",blockAlign:"center",children:[e.jsx(s,{variant:"bodyMd",fontWeight:"semibold",children:"Products JSON Feed"}),n.productsJson.rating==="excellent"&&e.jsx(a,{tone:"success",children:"ðŸ¤– Excellent"}),n.productsJson.rating==="good"&&e.jsx(a,{tone:"success",children:"ðŸ¤– Good"}),n.productsJson.rating==="fair"&&e.jsx(a,{tone:"warning",children:"ðŸ¤– Fair"}),n.productsJson.rating==="poor"&&e.jsx(a,{tone:"critical",children:"ðŸ¤– Poor"}),n.productsJson.rating==="locked"&&e.jsx(a,{children:"ðŸ”’ Locked"}),n.productsJson.rating==="unavailable"&&e.jsx(a,{tone:"critical",children:"âŒ Unavailable"})]}),e.jsx(s,{variant:"bodySm",children:n.productsJson.feedback}),n.productsJson.suggestions&&e.jsxs(s,{variant:"bodySm",tone:"subdued",children:["ðŸ’¡ ",n.productsJson.suggestions]})]})}),e.jsx(A,{})]}),n.storeMetadata&&e.jsxs(e.Fragment,{children:[e.jsx(o,{align:"space-between",blockAlign:"center",children:e.jsxs(c,{gap:"100",children:[e.jsxs(o,{gap:"200",blockAlign:"center",children:[e.jsx(s,{variant:"bodyMd",fontWeight:"semibold",children:"Store Metadata"}),n.storeMetadata.rating==="excellent"&&e.jsx(a,{tone:"success",children:"ðŸ¤– Excellent"}),n.storeMetadata.rating==="good"&&e.jsx(a,{tone:"success",children:"ðŸ¤– Good"}),n.storeMetadata.rating==="fair"&&e.jsx(a,{tone:"warning",children:"ðŸ¤– Fair"}),n.storeMetadata.rating==="poor"&&e.jsx(a,{tone:"critical",children:"ðŸ¤– Poor"}),n.storeMetadata.rating==="locked"&&e.jsx(a,{children:"ðŸ”’ Locked"}),n.storeMetadata.rating==="unavailable"&&e.jsx(a,{tone:"critical",children:"âŒ Unavailable"})]}),e.jsx(s,{variant:"bodySm",children:n.storeMetadata.feedback}),n.storeMetadata.suggestions&&e.jsxs(s,{variant:"bodySm",tone:"subdued",children:["ðŸ’¡ ",n.storeMetadata.suggestions]})]})}),e.jsx(A,{})]}),n.welcomePage&&e.jsxs(e.Fragment,{children:[e.jsx(o,{align:"space-between",blockAlign:"center",children:e.jsxs(c,{gap:"100",children:[e.jsxs(o,{gap:"200",blockAlign:"center",children:[e.jsx(s,{variant:"bodyMd",fontWeight:"semibold",children:"AI Welcome Page"}),n.welcomePage.rating==="excellent"&&e.jsx(a,{tone:"success",children:"ðŸ¤– Excellent"}),n.welcomePage.rating==="good"&&e.jsx(a,{tone:"success",children:"ðŸ¤– Good"}),n.welcomePage.rating==="fair"&&e.jsx(a,{tone:"warning",children:"ðŸ¤– Fair"}),n.welcomePage.rating==="poor"&&e.jsx(a,{tone:"critical",children:"ðŸ¤– Poor"}),n.welcomePage.rating==="locked"&&e.jsx(a,{children:"ðŸ”’ Locked"}),n.welcomePage.rating==="unavailable"&&e.jsx(a,{tone:"critical",children:"âŒ Unavailable"})]}),e.jsx(s,{variant:"bodySm",children:n.welcomePage.feedback}),n.welcomePage.suggestions&&e.jsxs(s,{variant:"bodySm",tone:"subdued",children:["ðŸ’¡ ",n.welcomePage.suggestions]})]})}),e.jsx(A,{})]}),n.collectionsJson&&e.jsxs(e.Fragment,{children:[e.jsx(o,{align:"space-between",blockAlign:"center",children:e.jsxs(c,{gap:"100",children:[e.jsxs(o,{gap:"200",blockAlign:"center",children:[e.jsx(s,{variant:"bodyMd",fontWeight:"semibold",children:"Collections JSON Feed"}),n.collectionsJson.rating==="excellent"&&e.jsx(a,{tone:"success",children:"ðŸ¤– Excellent"}),n.collectionsJson.rating==="good"&&e.jsx(a,{tone:"success",children:"ðŸ¤– Good"}),n.collectionsJson.rating==="fair"&&e.jsx(a,{tone:"warning",children:"ðŸ¤– Fair"}),n.collectionsJson.rating==="poor"&&e.jsx(a,{tone:"critical",children:"ðŸ¤– Poor"}),n.collectionsJson.rating==="locked"&&e.jsx(a,{children:"ðŸ”’ Locked"}),n.collectionsJson.rating==="unavailable"&&e.jsx(a,{tone:"critical",children:"âŒ Unavailable"})]}),e.jsx(s,{variant:"bodySm",children:n.collectionsJson.feedback}),n.collectionsJson.suggestions&&e.jsxs(s,{variant:"bodySm",tone:"subdued",children:["ðŸ’¡ ",n.collectionsJson.suggestions]})]})}),e.jsx(A,{})]}),n.aiSitemap&&e.jsxs(e.Fragment,{children:[e.jsx(o,{align:"space-between",blockAlign:"center",children:e.jsxs(c,{gap:"100",children:[e.jsxs(o,{gap:"200",blockAlign:"center",children:[e.jsx(s,{variant:"bodyMd",fontWeight:"semibold",children:"AI-Enhanced Sitemap"}),n.aiSitemap.rating==="excellent"&&e.jsx(a,{tone:"success",children:"ðŸ¤– Excellent"}),n.aiSitemap.rating==="good"&&e.jsx(a,{tone:"success",children:"ðŸ¤– Good"}),n.aiSitemap.rating==="fair"&&e.jsx(a,{tone:"warning",children:"ðŸ¤– Fair"}),n.aiSitemap.rating==="poor"&&e.jsx(a,{tone:"critical",children:"ðŸ¤– Poor"}),n.aiSitemap.rating==="locked"&&e.jsx(a,{children:"ðŸ”’ Locked"}),n.aiSitemap.rating==="unavailable"&&e.jsx(a,{tone:"critical",children:"âŒ Unavailable"})]}),e.jsx(s,{variant:"bodySm",children:n.aiSitemap.feedback}),n.aiSitemap.suggestions&&e.jsxs(s,{variant:"bodySm",tone:"subdued",children:["ðŸ’¡ ",n.aiSitemap.suggestions]})]})}),e.jsx(A,{})]}),n.schemaData&&e.jsx(o,{align:"space-between",blockAlign:"center",children:e.jsxs(c,{gap:"100",children:[e.jsxs(o,{gap:"200",blockAlign:"center",children:[e.jsx(s,{variant:"bodyMd",fontWeight:"semibold",children:"Advanced Schema Data"}),n.schemaData.rating==="excellent"&&e.jsx(a,{tone:"success",children:"ðŸ¤– Excellent"}),n.schemaData.rating==="good"&&e.jsx(a,{tone:"success",children:"ðŸ¤– Good"}),n.schemaData.rating==="fair"&&e.jsx(a,{tone:"warning",children:"ðŸ¤– Fair"}),n.schemaData.rating==="poor"&&e.jsx(a,{tone:"critical",children:"ðŸ¤– Poor"}),n.schemaData.rating==="locked"&&e.jsx(a,{children:"ðŸ”’ Locked"}),n.schemaData.rating==="unavailable"&&e.jsx(a,{tone:"critical",children:"âŒ Unavailable"})]}),e.jsx(s,{variant:"bodySm",children:n.schemaData.feedback}),n.schemaData.suggestions&&e.jsxs(s,{variant:"bodySm",tone:"subdued",children:["ðŸ’¡ ",n.schemaData.suggestions]})]})})]}),Object.keys(n).length===0&&!M&&e.jsx(f,{tone:"info",children:e.jsx(s,{children:Object.keys(w).length===0?"Run Basic Tests first, then use AI validation for deep analysis":'Click "Test with AI Bot" to get AI-powered feedback on your endpoint data quality'})}),!y&&e.jsx(f,{tone:"warning",children:e.jsx(s,{children:"Loading plan information..."})})]})})})})]}),e.jsx(E,{children:e.jsx(p,{padding:"300",children:e.jsxs(c,{gap:"400",children:[e.jsx(s,{as:"h3",variant:"headingMd",children:"Test with Real AI Bots"}),e.jsx(s,{variant:"bodyMd",tone:"subdued",children:"Manually test your store with real AI search engines"}),e.jsxs(c,{gap:"200",children:[e.jsxs(o,{align:"space-between",children:[e.jsx(s,{children:"Meta AI Search"}),k("meta")?e.jsx(d,{onClick:()=>U("Meta AI","https://www.meta.ai/"),size:"slim",children:"Test"}):e.jsx(d,{disabled:!0,size:"slim",children:"Plan upgrade required"})]}),e.jsxs(o,{align:"space-between",children:[e.jsx(s,{children:"Claude AI Search"}),k("claude")?e.jsx(d,{onClick:()=>U("Claude AI","https://claude.ai/"),size:"slim",children:"Test"}):e.jsx(d,{disabled:!0,size:"slim",children:"Plan upgrade required"})]}),e.jsxs(o,{align:"space-between",children:[e.jsx(s,{children:"Gemini AI Search"}),k("gemini")?e.jsx(d,{onClick:()=>U("Gemini AI","https://gemini.google.com/"),size:"slim",children:"Test"}):e.jsx(d,{disabled:!0,size:"slim",children:"Plan upgrade required"})]}),e.jsxs(o,{align:"space-between",children:[e.jsx(s,{children:"ChatGPT Web Search"}),k("chatgpt")?e.jsx(d,{url:`https://chat.openai.com/?q=What+products+does+${h}+sell%3F+Tell+me+about+this+business+and+what+they+offer`,external:!0,size:"slim",children:"Test"}):e.jsx(d,{disabled:!0,size:"slim",children:"Plan upgrade required"})]}),e.jsxs(o,{align:"space-between",children:[e.jsx(s,{children:"Perplexity AI Search"}),k("perplexity")?e.jsx(d,{url:`https://www.perplexity.ai/search?q=What+products+does+${h}+sell%3F+Tell+me+about+this+business+and+what+they+offer`,external:!0,size:"slim",children:"Test"}):e.jsx(d,{disabled:!0,size:"slim",children:"Plan upgrade required"})]}),e.jsxs(o,{align:"space-between",children:[e.jsx(s,{children:"DeepSeek AI Search"}),k("deepseek")?e.jsx(d,{onClick:()=>U("DeepSeek AI","https://chat.deepseek.com/"),size:"slim",children:"Test"}):e.jsx(d,{disabled:!0,size:"slim",children:"Plan upgrade required"})]})]}),e.jsx(f,{tone:"info",children:e.jsxs(s,{children:[e.jsx("strong",{children:"How to test with AI bots:"}),e.jsx("br",{}),"â€¢ ",e.jsx("strong",{children:"Perplexity & ChatGPT:"}),' Click "Test" - they support URL parameters',e.jsx("br",{}),"â€¢ ",e.jsx("strong",{children:"Meta AI, Claude, Gemini, DeepSeek:"}),' Click "Test" to open a modal with the prompt to copy']})})]})})}),e.jsx(E,{children:e.jsx(p,{padding:"300",children:e.jsxs(c,{gap:"300",children:[e.jsx(s,{as:"h4",variant:"headingSm",children:"AI Search Simulation"}),e.jsx(s,{variant:"bodyMd",tone:"subdued",children:"Test how AI bots would respond to questions about your store based on your structured data."}),e.jsx(f,{tone:"info",children:e.jsxs(c,{gap:"100",children:[e.jsx(s,{variant:"bodySm",fontWeight:"semibold",children:"Simulation Details:"}),e.jsxs(s,{variant:"bodySm",children:["â€¢ ",e.jsx("strong",{children:"Data Source:"})," Your store's products, collections, and metadata"]}),e.jsxs(s,{variant:"bodySm",children:["â€¢ ",e.jsx("strong",{children:"Response Style:"})," Concise (2-3 sentences), natural language"]}),e.jsxs(s,{variant:"bodySm",children:["â€¢ ",e.jsx("strong",{children:"Best For:"})," General store info, products, categories, contact details"]}),e.jsxs(s,{variant:"bodySm",children:["â€¢ ",e.jsx("strong",{children:"Limitations:"})," May not have real-time data (current stock, active promotions, exact shipping times)"]})]})}),e.jsxs(c,{gap:"200",children:[e.jsxs(o,{align:"space-between",children:[e.jsx(s,{children:"What products does this store sell?"}),e.jsx(d,{onClick:()=>R("products"),size:"slim",children:"Simulate Response"})]}),e.jsxs(o,{align:"space-between",children:[e.jsx(s,{children:"Tell me about this business"}),e.jsx(d,{onClick:()=>R("business"),size:"slim",children:"Simulate Response"})]}),e.jsxs(o,{align:"space-between",children:[e.jsx(s,{children:"What categories does this store have?"}),e.jsx(d,{onClick:()=>R("categories"),size:"slim",children:"Simulate Response"})]}),e.jsxs(o,{align:"space-between",children:[e.jsx(s,{children:"What is this store's contact information?"}),e.jsx(d,{onClick:()=>R("contact"),size:"slim",children:"Simulate Response"})]})]}),e.jsx(A,{}),e.jsxs(c,{gap:"200",children:[e.jsx(s,{variant:"headingSm",children:"Ask Your Own Question"}),e.jsx(fe,{label:"",value:q,onChange:ie,placeholder:"e.g., What are your return policies? Do you ship internationally?",autoComplete:"off",connectedRight:e.jsx(d,{onClick:()=>{q.trim()?R("custom",q):x("Please enter a question")},disabled:!q.trim(),children:"Ask AI"})})]}),W&&e.jsxs(p,{background:"bg-surface-secondary",padding:"300",borderRadius:"200",children:[e.jsx(s,{variant:"bodyMd",fontWeight:"semibold",children:"AI Bot Response:"}),e.jsx(p,{paddingBlockStart:"200",children:e.jsx(s,{variant:"bodyMd",children:W})})]})]})})})]}),G&&e.jsx(Se,{content:G,onDismiss:()=>x("")}),e.jsx(P,{open:ne,onClose:()=>O(!1),title:`Test with ${j==null?void 0:j.name}`,primaryAction:{content:"Open AI Bot",url:j==null?void 0:j.url,external:!0},secondaryActions:[{content:"Copy Prompt",onAction:()=>{navigator.clipboard.writeText(`What products does ${h} sell? Tell me about this business and what they offer.`),x("Prompt copied to clipboard!")}}],children:e.jsx(P.Section,{children:e.jsxs(c,{gap:"300",children:[e.jsx(s,{variant:"bodyMd",children:'1. Click "Copy Prompt" (left button)'}),e.jsxs(s,{variant:"bodyMd",children:['2. Click "Open AI Bot" (right button) to visit ',j==null?void 0:j.name]}),e.jsx(s,{variant:"bodyMd",children:"3. Paste the prompt and send"}),e.jsxs(p,{background:"bg-surface-secondary",padding:"300",borderRadius:"200",children:[e.jsx(s,{variant:"bodyMd",fontWeight:"semibold",children:"Prompt to test:"}),e.jsx(p,{paddingBlockStart:"200",children:e.jsxs(s,{variant:"bodyMd",as:"p",children:["What products does ",h," sell? Tell me about this business and what they offer."]})})]}),e.jsx(f,{tone:"info",children:e.jsx(s,{children:"The AI bot will search the web and use your store's structured data to answer."})})]})})}),e.jsx(P,{open:ce,onClose:()=>N(!1),title:"Upgrade Required",primaryAction:{content:"View Plans",onAction:()=>{const i=new URLSearchParams(window.location.search),t=i.toString()?`?${i.toString()}`:"";window.location.href=`/billing${t}`}},secondaryActions:[{content:"Cancel",onAction:()=>N(!1)}],children:e.jsx(P.Section,{children:e.jsxs(c,{gap:"300",children:[e.jsxs(s,{variant:"bodyMd",children:[e.jsx("strong",{children:b==null?void 0:b.endpoint})," requires ",e.jsx("strong",{children:b==null?void 0:b.requiredPlan})," plan or higher."]}),e.jsxs(s,{variant:"bodyMd",tone:"subdued",children:["Your current plan: ",e.jsx("strong",{children:b==null?void 0:b.currentPlan})]}),e.jsx(f,{tone:"info",children:e.jsx(s,{children:"Upgrade to access this advanced AI Discovery feature."})})]})})}),e.jsx(P,{open:ae,onClose:()=>T(!1),title:"Upgrade Required",primaryAction:{content:"View Plans",onAction:()=>{const i=new URLSearchParams(window.location.search),t=i.toString()?`?${i.toString()}`:"";window.location.href=`/billing${t}`}},secondaryActions:[{content:"Cancel",onAction:()=>T(!1)}],children:e.jsx(P.Section,{children:e.jsxs(c,{gap:"300",children:[e.jsxs(s,{variant:"bodyMd",children:["AI Testing requires ",e.jsx("strong",{children:(u==null?void 0:u.minimumPlan)||"Professional"})," plan or higher."]}),e.jsxs(s,{variant:"bodyMd",tone:"subdued",children:["Your current plan: ",e.jsx("strong",{children:(u==null?void 0:u.currentPlan)||"Starter"})]}),e.jsx(f,{tone:"info",children:e.jsx(s,{children:"Upgrade to test AI responses with real store data."})})]})})}),e.jsx(me,{open:re,onClose:()=>{D(!1),m(null),C()},tokensRequired:(u==null?void 0:u.tokensRequired)||0,tokensAvailable:(u==null?void 0:u.tokensAvailable)||0,tokensNeeded:(u==null?void 0:u.tokensNeeded)||0,feature:"ai-testing-simulation",shop:h,needsUpgrade:!1,returnTo:"/ai-testing"}),u&&e.jsx(be,{open:oe,onClose:()=>{J(!1),m(null)},feature:u.feature||"ai-testing-simulation",trialEndsAt:u.trialEndsAt,currentPlan:u.currentPlan||y,tokensRequired:u.tokensRequired||0,onActivatePlan:async()=>{try{const i=await S("/api/billing/activate",{method:"POST",body:JSON.stringify({shop:h,endTrial:!0,returnTo:"/ai-testing"})});if(i.requiresApproval&&i.confirmationUrl){window.top.location.href=i.confirmationUrl;return}window.location.reload()}catch(i){console.error("[AI-TESTING] âŒ Activation failed:",i);const t=new URLSearchParams(window.location.search),r=t.get("host"),g=t.get("embedded");window.location.href=`/billing?shop=${encodeURIComponent(h)}&embedded=${g}&host=${encodeURIComponent(r)}`}},onPurchaseTokens:()=>{const i=new URLSearchParams(window.location.search),t=i.get("host"),r=i.get("embedded");window.location.href=`/billing?shop=${encodeURIComponent(h)}&embedded=${r}&host=${encodeURIComponent(t)}&returnTo=${encodeURIComponent("/ai-testing")}`}})]})}export{Re as default};
